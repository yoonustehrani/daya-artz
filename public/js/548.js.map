{"version":3,"file":"js/548.js","mappings":"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","sources":["webpack:///./resources/js/helpers/index.js","webpack:///./resources/js/userarea/Pages/Private/Layout/components/Loading.jsx","webpack:///./resources/js/userarea/Pages/Private/Orders/OrderItemPage.jsx"],"sourcesContent":["export class NestedObj {\n    constructor(targetObj, path, value=null) {\n        this.targetObj = JSON.parse(JSON.stringify(targetObj))\n        this.value = value\n        let keys = path.split(\".\")\n        if (keys.length > 1) {\n            this.lastKey = keys.pop()\n            this.lastObj = keys.reduce((targetObj, key) => \n                targetObj[key] = targetObj[key] && !Array.isArray(targetObj[key]) ? targetObj[key] : {}\n            , this.targetObj)\n        } else {\n            this.lastObj = this.targetObj\n            this.lastKey = path\n        }\n    }\n\n    make() {\n        this.lastObj[this.lastKey] = this.value;\n        return this.targetObj\n    }\n\n    get() {\n        return this.lastObj[this.lastKey]??\"\"\n    }\n}\n\nexport function isObjEmpty(obj) {\n    return !Object.keys(obj).length\n}\n\nexport const translate = (key) => {\n    const dic = {\n        // order methods\n        \"automate\": \"اتومات\",\n        \"manual\": \"دستی\",\n        \"just-recieved\": \"دریافت شده\",\n        \"in-progress\": \"در حال انجام\",\n        \"finished\": \"تمام شده\",\n        // statuses\n        \"submitted\": \"دریافت سفارش\",\n        \"reviewed\": \"بررسی جزئیات\",\n        \"designing\": \"در دست طراحی\",\n        \"ready\": \"آماده تحویل\",\n        \"editing\": \"در حال ویرایش\",\n        \"canceled\": \"لغو شده\",\n        \"suspended\": \"تعلیق شده\",\n        \"finished\": \"اتمام سفارش\",\n        \"checked-out\": \"تسویه و تحویل\"\n    }\n    return dic[key]\n}\n\nexport const number_format = (number, appendix = false) => `${Number(number).toLocaleString('en-US')}${appendix ? ' تومان' : ''}`","import { Spinner } from 'react-activity'\nexport default function Loading(props) {\n    return (\n        <div className=\"activity-container mb-2\">\n            <Spinner color={props.color ?? '#999999'} size={props.size ?? 34} speed={0.5} animating={true}/>\n        </div>\n    )\n}","import React, { Component } from 'react'\nimport Loading from '../Layout/components/Loading'\nimport { useHttpService, useJalaliDate } from '../../../hooks'\nimport { Link } from 'react-router-dom'\nimport { translate } from '../../../../helpers'\n\nexport default class OrderItemPage extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            orderItem: null,\n            level: null,\n            loading: true,\n            tickets: []\n        }\n    }\n    componentDidMount() {\n        let {orderId} = this.props.params\n        this.http = useHttpService(`/userarea/orders/${orderId}`)\n        this.loadItem()\n    }\n    loadTickets = async () => {\n        let {itemId} = this.props.params\n        const response = await this.http.get(`/items/${itemId}/tickets`)\n        let {tickets} = response\n        this.setState({\n            tickets: tickets ?? []\n        })\n    }\n\n    onTicketClick = ticketId => this.props.history.push(`/tickets/${ticketId}`)\n\n    loadItem = async () => {\n        let {itemId} = this.props.params\n        const response = await this.http.get(`/items/${itemId}`)\n        this.loadTickets()\n        this.setState({\n            orderItem: response,\n            loading: false\n        }, () => {\n            response.item.canceled ? null : this.getLevel()\n        })\n    }\n    getLevel = () => {\n        let { item, statuses } = this.state.orderItem, {status} = item, { normal, list } = statuses, level\n        if (normal.indexOf(status) === -1) { // not unnormal procsess like suspended or editing\n            let targetArray = list.slice(0, list.indexOf(status)).reverse()\n            for (let i = 0; i < targetArray.length; i++ ) {\n                let target_status = targetArray[i]\n                if (normal.includes(target_status)) {\n                    level = normal.indexOf(target_status) + 1\n                    break\n                }\n            }\n        } else { // normal proccess\n            level = normal.indexOf(status) + 1            \n        }\n        this.setState({\n            level: level,\n        })\n    }\n    getPercent = (exact) => {\n        let {level, orderItem} = this.state\n        let percent = level * (100/orderItem.statuses.normal.length)\n        return exact ? percent : Math.floor(percent)\n    }\n    render() {\n        let { loading, orderItem, level } = this.state, { item, okay, order, statuses } = orderItem??{}\n        return (\n            <div>\n                {loading ? <Loading />\n                : <>\n                    <div className='order-item-header'>\n                        <div className=\"order-item-header-title\"><h4>{item.title}</h4></div>\n                        <div className=\"progress\">\n                            <div className={`progress-bar ${item.canceled&&\"canceled\"}`} style={{ width: `${this.getPercent(true)}%`}} role=\"progressbar\" aria-valuenow={item.canceled ? \"0%\" : `${this.getPercent(true)}%`} aria-valuemin=\"0%\" area-valuemax=\"100%\">{item.canceled ? <span className='text-danger'>لغو شده <i className='far fa-times'></i></span> : `${this.getPercent()}%`}</div>\n                        </div>\n                    </div>\n                    <div className='order-item-infos-container'>\n                        <div className='order-item-section'>\n                            <span className='order-item-section-icon'><i className='far fa-info-square'></i></span>\n                            <ul className='order-item-list'>\n                                <li>بسته یا خدمات مربوطه: <a href={item.service.uri}>{item.service.title}</a></li>\n                                <li>کد سفارش: <Link to={`/orders/${order.id}`}>{order.code}</Link></li>\n                                <li>شیوه ثبت: <span>{order.method}</span></li>\n                            </ul>\n                        </div>\n                        <div className='order-item-section'>\n                            <span className='order-item-section-icon'><i className=\"far fa-spinner\"></i></span>\n                            <ul className='order-item-list'>\n                                <li>وضعیت: <span>{item.status_fa}</span></li>\n                                <li>توضیحات: <span>{item.state_info}</span></li>\n                            </ul>\n                        </div>\n                        <div className='order-item-section'>\n                            <span className='order-item-section-icon'><i className=\"far fa-calendar-exclamation\"></i></span>\n                            <ul className='order-item-list'>\n                                <li>موعد تحویل: <span>{item.due_date ? useJalaliDate(item.due_date).format(\"jYYYY/jM/jD dddd\") : \"\"}</span></li>\n                                <li>تاریخ اتمام: <span>{item.finished_at ? useJalaliDate(item.finished_at).format(\"jYYYY/jM/jD dddd\") : \"\"}</span></li>\n                            </ul>\n                        </div>\n                        <div className='order-item-section'>\n                            <span className='order-item-section-icon'><i className=\"far fa-comment-alt-medical\"></i></span>\n                            <ul className='order-item-list'>\n                                <li>طرح مربوطه: <span>نیاز به داینامیک سازی</span></li>\n                                <li>توضیحات پروژه: {item.description}</li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div className={`order-item-progress-container level-${level}`}>\n                        {\n                            statuses && statuses.normal.length > 0 ? statuses.normal.map((statuse, i) => (\n                                <div key={i} className=\"order-level-progress\">\n                                    <h4 className='order-level-title'>{translate(statuse)}</h4>\n                                    {!item.normal && i + 1 === level && <span className='badge badge-warning unnormal-status'>{item.status_fa}</span>}\n                                    <span className='order-level-circle'><i className={`far ${statuse}`}></i></span>\n                                </div>\n                            )) : null\n                        }\n                    </div>\n                    <div className=\"w-100 table-responsive\">\n                        <table className='table table-hover'>\n                            <caption>تیکت های مرتبط به این سفارش</caption>\n                            <thead>\n                                <tr>\n                                    <th>#</th>\n                                    <th>شماره تیکت</th>\n                                    <th>عنوان تیکت</th>\n                                    <th>بخش مربوطه</th>\n                                    <th>وضعیت</th>\n                                    <th>تاریخ ایجاد</th>\n                                    <th>تاریخ اتمام</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {this.state.tickets.map((ticket, i) => (\n                                    <tr onClick={() => this.onTicketClick(ticket.id)}>\n                                        <th>{i + 1}</th>\n                                        <td>{ticket.tracking_code}</td>\n                                        <td>{ticket.title}</td>\n                                        <td>{ticket.department && ticket.department.name}</td>\n                                        <td>{ticket.closed_at && \"بسته شده\"}</td>\n                                        <td>{useJalaliDate(ticket.created_at).format()}</td>\n                                        <td>{useJalaliDate(ticket.closed_at).format()}</td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </div>\n                </> \n                }\n            </div>\n        )\n    }\n}"],"names":["NestedObj","targetObj","path","value","this","JSON","parse","stringify","keys","split","length","lastKey","pop","lastObj","reduce","key","Array","isArray","isObjEmpty","obj","Object","translate","number_format","number","appendix","Number","toLocaleString","Loading","props","className","Spinner","color","size","speed","animating","i","OrderItemPage","itemId","params","http","get","response","tickets","setState","ticketId","history","push","loadTickets","orderItem","loading","item","canceled","getLevel","level","state","statuses","status","normal","list","indexOf","targetArray","slice","reverse","target_status","includes","exact","percent","Math","floor","orderId","useHttpService","loadItem","order","okay","title","style","width","getPercent","role","href","service","uri","to","id","code","method","status_fa","state_info","due_date","useJalaliDate","format","finished_at","description","map","statuse","ticket","onClick","onTicketClick","tracking_code","department","name","closed_at","created_at","Component"],"sourceRoot":""}